{"ast":null,"code":"var _jsxFileName = \"/Users/clara/Desktop/Sewy/SewyCode/components/PDF.js\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport Svg, { Rect } from \"react-native-svg\";\nimport { printToFileAsync } from \"expo-print\";\nimport { shareAsync } from \"expo-sharing\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PDF = () => {\n  const [largeur, setLargeur] = useState(0);\n  const [longueur, setLongueur] = useState(0);\n  const cmToPx = cm => {\n    const pixelRatio = PixelRatio.get();\n    console.log(\"Pixel Ratio:\", pixelRatio);\n    const pxPerCm = 37.8;\n    return cm * pxPerCm * pixelRatio;\n  };\n  const saveAsPDF = async ({\n    largeur,\n    longueur\n  }) => {\n    const svgWidth = 1180;\n    const svgHeight = 1500;\n    const numPagesWidth = Math.ceil(largeur / svgWidth);\n    const numPagesHeight = Math.ceil(longueur / svgHeight);\n    console.log(largeur);\n    console.log(longueur);\n    let htmlContent = \"<html><body>\";\n    for (let i = 0; i < numPagesWidth; i++) {\n      for (let j = 0; j < numPagesHeight; j++) {\n        const svg = `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${svgWidth}\" height=\"${svgHeight}\">\n          <rect x=\"0\" y=\"0\" width=\"${svgWidth}\" height=\"${svgHeight}\" stroke=\"red\" stroke-width=\"5\" fill=\"transparent\"/>\n          <rect x=\"${-i * svgWidth + 10}\" y=\"${-j * svgHeight + 10}\" width=\"${largeur}\" height=\"${longueur}\" stroke=\"black\" stroke-width=\"2\" fill=\"transparent\"/>\n        </svg>\n      `;\n        htmlContent += svg;\n      }\n    }\n    htmlContent += \"</body></html>\";\n    const file = await printToFileAsync({\n      html: htmlContent,\n      base64: false\n    });\n    await shareAsync(file.uri);\n  };\n  return _jsxDEV(View, {\n    style: styles.container,\n    children: [_jsxDEV(Text, {\n      style: styles.title,\n      children: \"Tracer un rectangle\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      style: styles.input,\n      placeholder: \"Largeur\",\n      keyboardType: \"numeric\",\n      value: largeur,\n      onChangeText: text => setLargeur(cmToPx(text))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), _jsxDEV(TextInput, {\n      style: styles.input,\n      placeholder: \"Longueur\",\n      keyboardType: \"numeric\",\n      value: longueur,\n      onChangeText: text => setLongueur(cmToPx(text))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), _jsxDEV(Button, {\n      title: \"T\\xE9l\\xE9charger en PDF\",\n      onPress: () => saveAsPDF({\n        largeur,\n        longueur\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 16\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    marginBottom: 20\n  },\n  input: {\n    width: \"100%\",\n    padding: 10,\n    borderWidth: 1,\n    borderColor: \"#ccc\",\n    borderRadius: 5,\n    marginBottom: 10\n  }\n});\nexport default PDF;","map":{"version":3,"names":["React","useState","View","TextInput","Button","Text","StyleSheet","PixelRatio","Svg","Rect","printToFileAsync","shareAsync","jsxDEV","_jsxDEV","PDF","largeur","setLargeur","longueur","setLongueur","cmToPx","cm","pixelRatio","get","console","log","pxPerCm","saveAsPDF","svgWidth","svgHeight","numPagesWidth","Math","ceil","numPagesHeight","htmlContent","i","j","svg","file","html","base64","uri","style","styles","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","input","placeholder","keyboardType","value","onChangeText","text","onPress","create","justifyContent","alignItems","padding","fontSize","fontWeight","marginBottom","width","borderWidth","borderColor","borderRadius"],"sources":["/Users/clara/Desktop/Sewy/SewyCode/components/PDF.js"],"sourcesContent":["//Ce composant est un formulaire qui permet de dessiner un rectangle. Il contient des champs pour la largeur et la longueur du rectangle. Lorsque l'utilisateur soumet le formulaire, un rectangle est dessiné avec les dimensions spécifiées. L'utilisateur peut également sauvegarder le rectangle en tant que fichier SVG ou le télécharger en tant que fichier PDF.\nimport React, { useState } from \"react\";\nimport {\n  View,\n  TextInput,\n  Button,\n  Text,\n  StyleSheet,\n  PixelRatio,\n} from \"react-native\";\nimport Svg, { Rect } from \"react-native-svg\";\nimport { printToFileAsync } from \"expo-print\";\nimport { shareAsync } from \"expo-sharing\";\n\n//Fonction permettant d'enregistrer un dessin SVG au format PDF. Elle prend en paramètre la largeur et la longueur du rectangle à dessiner.\n\nconst PDF = () => {\n  const [largeur, setLargeur] = useState(0);\n  const [longueur, setLongueur] = useState(0);\n\n  const cmToPx = (cm) => {\n    // Densité de pixels de l'appareil\n    const pixelRatio = PixelRatio.get();\n    console.log(\"Pixel Ratio:\", pixelRatio);\n\n    // On considère qu'une valeur de 1 cm = 37.8 pixels à une densité de 1\n    // (Cette valeur est basée sur le standard CSS de 96 DPI où 1 pouce = 2.54 cm)\n    const pxPerCm = 37.8;\n\n    // Conversion finale en tenant compte de la densité\n    return cm * pxPerCm * pixelRatio;\n  };\n\n  const saveAsPDF = async ({ largeur, longueur }) => {\n    const svgWidth = 1180;\n    const svgHeight = 1500;\n\n    const numPagesWidth = Math.ceil(largeur / svgWidth);\n    const numPagesHeight = Math.ceil(longueur / svgHeight);\n\n    console.log(largeur);\n    console.log(longueur);\n\n    let htmlContent = \"<html><body>\";\n    for (let i = 0; i < numPagesWidth; i++) {\n      for (let j = 0; j < numPagesHeight; j++) {\n        const svg = `\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${svgWidth}\" height=\"${svgHeight}\">\n          <rect x=\"0\" y=\"0\" width=\"${svgWidth}\" height=\"${svgHeight}\" stroke=\"red\" stroke-width=\"5\" fill=\"transparent\"/>\n          <rect x=\"${-i * svgWidth + 10}\" y=\"${\n          -j * svgHeight + 10\n        }\" width=\"${largeur}\" height=\"${longueur}\" stroke=\"black\" stroke-width=\"2\" fill=\"transparent\"/>\n        </svg>\n      `;\n        htmlContent += svg;\n      }\n    }\n    htmlContent += \"</body></html>\";\n\n    const file = await printToFileAsync({ html: htmlContent, base64: false });\n    await shareAsync(file.uri);\n  };\n  return (\n    <View style={styles.container}>\n      <Text style={styles.title}>Tracer un rectangle</Text>\n      <TextInput\n        style={styles.input}\n        placeholder=\"Largeur\"\n        keyboardType=\"numeric\"\n        value={largeur}\n        onChangeText={(text) => setLargeur(cmToPx(text))}\n      />\n      <TextInput\n        style={styles.input}\n        placeholder=\"Longueur\"\n        keyboardType=\"numeric\"\n        value={longueur}\n        onChangeText={(text) => setLongueur(cmToPx(text))}\n      />\n      <Button\n        title=\"Télécharger en PDF\"\n        onPress={() => saveAsPDF({ largeur, longueur })}\n      />\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 16,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    marginBottom: 20,\n  },\n  input: {\n    width: \"100%\",\n    padding: 10,\n    borderWidth: 1,\n    borderColor: \"#ccc\",\n    borderRadius: 5,\n    marginBottom: 10,\n  },\n});\n\nexport default PDF;\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}