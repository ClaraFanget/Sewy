{"ast":null,"code":"var _jsxFileName = \"/Users/clara/Desktop/Sewy/SewyCode/components/CSV.js\";\nimport React, { useState } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport PixelRatio from \"react-native-web/dist/exports/PixelRatio\";\nimport TouchableWithoutFeedback from \"react-native-web/dist/exports/TouchableWithoutFeedback\";\nimport Keyboard from \"react-native-web/dist/exports/Keyboard\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { printToFileAsync } from \"expo-print\";\nimport { shareAsync } from \"expo-sharing\";\nimport * as FileSystem from \"expo-file-system\";\nimport Papa from \"papaparse\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst yPositions = [3, 10, 40, 60];\nconst CSV = () => {\n  const [longueurs, setLongueurs] = useState([\"\", \"\", \"\", \"\"]);\n  const handleChange = (index, value) => {\n    const newLongueurs = [...longueurs];\n    newLongueurs[index] = value;\n    setLongueurs(newLongueurs);\n  };\n  const enregistrerEtExporter = async () => {\n    try {\n      if (longueurs.some(l => l.trim() === \"\")) {\n        Alert.alert(\"Erreur\", \"Merci de remplir les 4 longueurs\");\n        return;\n      }\n      const valeursNum = longueurs.map(v => parseFloat(v));\n      const csvContent = \"id,longueur\\n\" + valeursNum.map((l, i) => `${i + 1},${l}`).join(\"\\n\");\n      const path = FileSystem.documentDirectory + \"Lignes.csv\";\n      await FileSystem.writeAsStringAsync(path, csvContent, {\n        encoding: FileSystem.EncodingType.UTF8\n      });\n      const contenu = await FileSystem.readAsStringAsync(path);\n      const result = Papa.parse(contenu, {\n        header: true\n      });\n      const longueursLues = result.data.map(row => parseFloat(row.longueur));\n      const lignesSVG = longueursLues.map((longueur, index) => {\n        const y = yPositions[index];\n        return `<line x1=\"0\" y1=\"${y}\" x2=\"${longueur}\" y2=\"${y}\" stroke=\"black\" stroke-width=\"0.1\" />`;\n      }).join(\"\\n\");\n      const htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head><meta charset=\"utf-8\"><title>Lignes PDF</title></head>\n        <body style=\"margin:0;padding:0;width:210mm;height:297mm;\">\n          <svg width=\"21cm\" height=\"29.7cm\" viewBox=\"0 0 210 297\" xmlns=\"http://www.w3.org/2000/svg\">\n            ${lignesSVG}\n          </svg>\n        </body>\n        </html>\n      `;\n      const file = await printToFileAsync({\n        html: htmlContent,\n        base64: false\n      });\n      await shareAsync(file.uri);\n    } catch (error) {\n      console.error(\"Erreur : \", error);\n      Alert.alert(\"Erreur\", \"Une erreur est survenue lors de l'export.\");\n    }\n  };\n  return _jsxDEV(TouchableWithoutFeedback, {\n    onPress: Keyboard.dismiss,\n    accessible: false,\n    children: _jsxDEV(View, {\n      style: styles.container,\n      children: [_jsxDEV(Text, {\n        style: styles.title,\n        children: \"Tracer 4 lignes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), longueurs.map((val, i) => _jsxDEV(TextInput, {\n        style: styles.input,\n        placeholder: `Longueur ligne ${i + 1}`,\n        keyboardType: \"numeric\",\n        value: val,\n        onChangeText: text => handleChange(i, text)\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 11\n      }, this)), _jsxDEV(Button, {\n        title: \"T\\xE9l\\xE9charger en PDF\",\n        onPress: enregistrerEtExporter\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 16\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    marginBottom: 20\n  },\n  input: {\n    width: \"100%\",\n    padding: 10,\n    borderWidth: 1,\n    borderColor: \"#ccc\",\n    borderRadius: 5,\n    marginBottom: 10\n  }\n});\nexport default CSV;","map":{"version":3,"names":["React","useState","View","TextInput","Button","Text","StyleSheet","PixelRatio","TouchableWithoutFeedback","Keyboard","Alert","printToFileAsync","shareAsync","FileSystem","Papa","jsxDEV","_jsxDEV","yPositions","CSV","longueurs","setLongueurs","handleChange","index","value","newLongueurs","enregistrerEtExporter","some","l","trim","alert","valeursNum","map","v","parseFloat","csvContent","i","join","path","documentDirectory","writeAsStringAsync","encoding","EncodingType","UTF8","contenu","readAsStringAsync","result","parse","header","longueursLues","data","row","longueur","lignesSVG","y","htmlContent","file","html","base64","uri","error","console","onPress","dismiss","accessible","children","style","styles","container","title","fileName","_jsxFileName","lineNumber","columnNumber","val","input","placeholder","keyboardType","onChangeText","text","create","justifyContent","alignItems","padding","fontSize","fontWeight","marginBottom","width","borderWidth","borderColor","borderRadius"],"sources":["/Users/clara/Desktop/Sewy/SewyCode/components/CSV.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport {\n  View,\n  TextInput,\n  Button,\n  Text,\n  StyleSheet,\n  PixelRatio,\n  TouchableWithoutFeedback,\n  Keyboard,\n  Alert,\n} from \"react-native\";\nimport { printToFileAsync } from \"expo-print\";\nimport { shareAsync } from \"expo-sharing\";\nimport * as FileSystem from \"expo-file-system\";\nimport Papa from \"papaparse\";\n\n// Position Y fixe de chaque ligne\nconst yPositions = [3, 10, 40, 60];\n\nconst CSV = () => {\n  const [longueurs, setLongueurs] = useState([\"\", \"\", \"\", \"\"]);\n\n  const handleChange = (index, value) => {\n    const newLongueurs = [...longueurs];\n    newLongueurs[index] = value;\n    setLongueurs(newLongueurs);\n  };\n\n  const enregistrerEtExporter = async () => {\n    try {\n      \n      if (longueurs.some((l) => l.trim() === \"\")) {\n        Alert.alert(\"Erreur\", \"Merci de remplir les 4 longueurs\");\n        return;\n      }\n\n      const valeursNum = longueurs.map((v) => parseFloat(v));\n\n      \n      const csvContent =\n        \"id,longueur\\n\" + valeursNum.map((l, i) => `${i + 1},${l}`).join(\"\\n\");\n      const path = FileSystem.documentDirectory + \"Lignes.csv\";\n      await FileSystem.writeAsStringAsync(path, csvContent, {\n        encoding: FileSystem.EncodingType.UTF8,\n      });\n\n   \n      const contenu = await FileSystem.readAsStringAsync(path);\n      const result = Papa.parse(contenu, { header: true });\n      const longueursLues = result.data.map((row) => parseFloat(row.longueur));\n\n      \n      const lignesSVG = longueursLues\n        .map((longueur, index) => {\n          const y = yPositions[index];\n          return `<line x1=\"0\" y1=\"${y}\" x2=\"${longueur}\" y2=\"${y}\" stroke=\"black\" stroke-width=\"0.1\" />`;\n        })\n        .join(\"\\n\");\n\n  \n      const htmlContent = `\n        <!DOCTYPE html>\n        <html>\n        <head><meta charset=\"utf-8\"><title>Lignes PDF</title></head>\n        <body style=\"margin:0;padding:0;width:210mm;height:297mm;\">\n          <svg width=\"21cm\" height=\"29.7cm\" viewBox=\"0 0 210 297\" xmlns=\"http://www.w3.org/2000/svg\">\n            ${lignesSVG}\n          </svg>\n        </body>\n        </html>\n      `;\n\n    \n      const file = await printToFileAsync({ html: htmlContent, base64: false });\n      await shareAsync(file.uri);\n    } catch (error) {\n      console.error(\"Erreur : \", error);\n      Alert.alert(\"Erreur\", \"Une erreur est survenue lors de l'export.\");\n    }\n  };\n\n  return (\n    <TouchableWithoutFeedback onPress={Keyboard.dismiss} accessible={false}>\n      <View style={styles.container}>\n        <Text style={styles.title}>Tracer 4 lignes</Text>\n\n        {longueurs.map((val, i) => (\n          <TextInput\n            key={i}\n            style={styles.input}\n            placeholder={`Longueur ligne ${i + 1}`}\n            keyboardType=\"numeric\"\n            value={val}\n            onChangeText={(text) => handleChange(i, text)}\n          />\n        ))}\n\n        <Button title=\"Télécharger en PDF\" onPress={enregistrerEtExporter} />\n      </View>\n    </TouchableWithoutFeedback>\n  );\n};\n\nconst styles = StyleSheet.create({\n  container: {\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    padding: 16,\n  },\n  title: {\n    fontSize: 24,\n    fontWeight: \"bold\",\n    marginBottom: 20,\n  },\n  input: {\n    width: \"100%\",\n    padding: 10,\n    borderWidth: 1,\n    borderColor: \"#ccc\",\n    borderRadius: 5,\n    marginBottom: 10,\n  },\n});\n\nexport default CSV;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AAAC,OAAAC,IAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,MAAA;AAAA,OAAAC,IAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,UAAA;AAAA,OAAAC,wBAAA;AAAA,OAAAC,QAAA;AAAA,OAAAC,KAAA;AAYxC,SAASC,gBAAgB,QAAQ,YAAY;AAC7C,SAASC,UAAU,QAAQ,cAAc;AACzC,OAAO,KAAKC,UAAU,MAAM,kBAAkB;AAC9C,OAAOC,IAAI,MAAM,WAAW;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAG7B,MAAMC,UAAU,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;AAElC,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAChB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGnB,QAAQ,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;EAE5D,MAAMoB,YAAY,GAAGA,CAACC,KAAK,EAAEC,KAAK,KAAK;IACrC,MAAMC,YAAY,GAAG,CAAC,GAAGL,SAAS,CAAC;IACnCK,YAAY,CAACF,KAAK,CAAC,GAAGC,KAAK;IAC3BH,YAAY,CAACI,YAAY,CAAC;EAC5B,CAAC;EAED,MAAMC,qBAAqB,GAAG,MAAAA,CAAA,KAAY;IACxC,IAAI;MAEF,IAAIN,SAAS,CAACO,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACC,IAAI,CAAC,CAAC,KAAK,EAAE,CAAC,EAAE;QAC1ClB,KAAK,CAACmB,KAAK,CAAC,QAAQ,EAAE,kCAAkC,CAAC;QACzD;MACF;MAEA,MAAMC,UAAU,GAAGX,SAAS,CAACY,GAAG,CAAEC,CAAC,IAAKC,UAAU,CAACD,CAAC,CAAC,CAAC;MAGtD,MAAME,UAAU,GACd,eAAe,GAAGJ,UAAU,CAACC,GAAG,CAAC,CAACJ,CAAC,EAAEQ,CAAC,KAAK,GAAGA,CAAC,GAAG,CAAC,IAAIR,CAAC,EAAE,CAAC,CAACS,IAAI,CAAC,IAAI,CAAC;MACxE,MAAMC,IAAI,GAAGxB,UAAU,CAACyB,iBAAiB,GAAG,YAAY;MACxD,MAAMzB,UAAU,CAAC0B,kBAAkB,CAACF,IAAI,EAAEH,UAAU,EAAE;QACpDM,QAAQ,EAAE3B,UAAU,CAAC4B,YAAY,CAACC;MACpC,CAAC,CAAC;MAGF,MAAMC,OAAO,GAAG,MAAM9B,UAAU,CAAC+B,iBAAiB,CAACP,IAAI,CAAC;MACxD,MAAMQ,MAAM,GAAG/B,IAAI,CAACgC,KAAK,CAACH,OAAO,EAAE;QAAEI,MAAM,EAAE;MAAK,CAAC,CAAC;MACpD,MAAMC,aAAa,GAAGH,MAAM,CAACI,IAAI,CAAClB,GAAG,CAAEmB,GAAG,IAAKjB,UAAU,CAACiB,GAAG,CAACC,QAAQ,CAAC,CAAC;MAGxE,MAAMC,SAAS,GAAGJ,aAAa,CAC5BjB,GAAG,CAAC,CAACoB,QAAQ,EAAE7B,KAAK,KAAK;QACxB,MAAM+B,CAAC,GAAGpC,UAAU,CAACK,KAAK,CAAC;QAC3B,OAAO,oBAAoB+B,CAAC,SAASF,QAAQ,SAASE,CAAC,wCAAwC;MACjG,CAAC,CAAC,CACDjB,IAAI,CAAC,IAAI,CAAC;MAGb,MAAMkB,WAAW,GAAG;AAC1B;AACA;AACA;AACA;AACA;AACA,cAAcF,SAAS;AACvB;AACA;AACA;AACA,OAAO;MAGD,MAAMG,IAAI,GAAG,MAAM5C,gBAAgB,CAAC;QAAE6C,IAAI,EAAEF,WAAW;QAAEG,MAAM,EAAE;MAAM,CAAC,CAAC;MACzE,MAAM7C,UAAU,CAAC2C,IAAI,CAACG,GAAG,CAAC;IAC5B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,WAAW,EAAEA,KAAK,CAAC;MACjCjD,KAAK,CAACmB,KAAK,CAAC,QAAQ,EAAE,2CAA2C,CAAC;IACpE;EACF,CAAC;EAED,OACEb,OAAA,CAACR,wBAAwB;IAACqD,OAAO,EAAEpD,QAAQ,CAACqD,OAAQ;IAACC,UAAU,EAAE,KAAM;IAAAC,QAAA,EACrEhD,OAAA,CAACd,IAAI;MAAC+D,KAAK,EAAEC,MAAM,CAACC,SAAU;MAAAH,QAAA,GAC5BhD,OAAA,CAACX,IAAI;QAAC4D,KAAK,EAAEC,MAAM,CAACE,KAAM;QAAAJ,QAAA,EAAC;MAAe;QAAAK,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM,CAAC,EAEhDrD,SAAS,CAACY,GAAG,CAAC,CAAC0C,GAAG,EAAEtC,CAAC,KACpBnB,OAAA,CAACb,SAAS;QAER8D,KAAK,EAAEC,MAAM,CAACQ,KAAM;QACpBC,WAAW,EAAE,kBAAkBxC,CAAC,GAAG,CAAC,EAAG;QACvCyC,YAAY,EAAC,SAAS;QACtBrD,KAAK,EAAEkD,GAAI;QACXI,YAAY,EAAGC,IAAI,IAAKzD,YAAY,CAACc,CAAC,EAAE2C,IAAI;MAAE,GALzC3C,CAAC;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAMP,CACF,CAAC,EAEFxD,OAAA,CAACZ,MAAM;QAACgE,KAAK,EAAC,0BAAoB;QAACP,OAAO,EAAEpC;MAAsB;QAAA4C,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACjE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACiB,CAAC;AAE/B,CAAC;AAED,MAAMN,MAAM,GAAG5D,UAAU,CAACyE,MAAM,CAAC;EAC/BZ,SAAS,EAAE;IACTa,cAAc,EAAE,QAAQ;IACxBC,UAAU,EAAE,QAAQ;IACpBC,OAAO,EAAE;EACX,CAAC;EACDd,KAAK,EAAE;IACLe,QAAQ,EAAE,EAAE;IACZC,UAAU,EAAE,MAAM;IAClBC,YAAY,EAAE;EAChB,CAAC;EACDX,KAAK,EAAE;IACLY,KAAK,EAAE,MAAM;IACbJ,OAAO,EAAE,EAAE;IACXK,WAAW,EAAE,CAAC;IACdC,WAAW,EAAE,MAAM;IACnBC,YAAY,EAAE,CAAC;IACfJ,YAAY,EAAE;EAChB;AACF,CAAC,CAAC;AAEF,eAAenE,GAAG","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}